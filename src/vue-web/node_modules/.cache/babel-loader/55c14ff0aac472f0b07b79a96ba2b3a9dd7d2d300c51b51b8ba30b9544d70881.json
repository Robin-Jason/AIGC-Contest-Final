{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.set.difference.v2.js\";\nimport \"core-js/modules/esnext.set.intersection.v2.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.v2.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.v2.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/esnext.set.union.v2.js\";\nimport sudoku from 'sudoku';\nexport default {\n  data() {\n    return {\n      cells: Array.from({\n        length: 81\n      }, () => ({\n        value: 0,\n        fixed: false\n      })),\n      difficulty: 'easy',\n      // 默认难度\n      timer: null,\n      elapsedTime: 0,\n      hintsUsed: 0,\n      // 添加用于跟踪提示次数的变量\n      historyRecords: [] // 历史记录数组\n    };\n  },\n  created() {\n    this.generateSudoku();\n    this.startTimer();\n  },\n  methods: {\n    generateSudoku() {\n      let puzzle, solution;\n      do {\n        puzzle = sudoku.makepuzzle();\n        solution = sudoku.solvepuzzle(puzzle);\n      } while (!solution);\n      this.cells = puzzle.map((value, index) => ({\n        value: value === null ? 0 : value + 1,\n        fixed: value !== null\n      }));\n      this.solution = solution.map(value => value + 1);\n      this.resetTimer();\n      this.startTimer();\n    },\n    resetGame() {\n      this.cells.forEach(cell => {\n        if (!cell.fixed) {\n          cell.value = 0;\n        }\n      });\n    },\n    checkSolution() {\n      const validGroup = group => {\n        const seen = new Set();\n        for (let i = 0; i < 9; i++) {\n          const num = group[i].value;\n          if (num < 1 || num > 9 || seen.has(num)) return false;\n          seen.add(num);\n        }\n        return true;\n      };\n\n      // 检查行、列和小方块\n      for (let i = 0; i < 9; i++) {\n        const row = this.cells.slice(i * 9, i * 9 + 9);\n        const col = this.cells.filter((_, index) => index % 9 === i);\n        const box = this.cells.filter((_, index) => Math.floor(index / 27) === Math.floor(i / 3) && Math.floor(index % 9 / 3) === i % 3);\n        if (!validGroup(row) || !validGroup(col) || !validGroup(box)) {\n          this.$message.error(\"解答错误，请再试一次！\");\n          return;\n        }\n      }\n\n      // 如果解答正确，停止计时器并计算得分\n      clearInterval(this.timer);\n      const date = new Date().toLocaleDateString();\n      const baseScore = 1000;\n      const timePenalty = this.elapsedTime * 2; // 用时惩罚因子\n      const hintPenalty = this.hintsUsed * 50; // 提示次数惩罚因子\n      const score = Math.max(baseScore - timePenalty - hintPenalty, 0); // 确保分数不为负\n\n      // 更新历史记录\n      this.historyRecords.push({\n        date: date,\n        difficulty: this.difficulty === 'easy' ? '简单' : this.difficulty === 'medium' ? '中等' : '困难',\n        time: this.elapsedTime,\n        hints: this.hintsUsed,\n        score: score,\n        result: '成功'\n      });\n      this.$message.success(`恭喜你！解答正确！用时：${this.elapsedTime} 秒，得分：${score}`);\n    },\n    startTimer() {\n      this.timer = setInterval(() => {\n        this.elapsedTime++;\n      }, 1000);\n    },\n    resetTimer() {\n      clearInterval(this.timer);\n      this.elapsedTime = 0;\n    },\n    provideHint() {\n      // 示例提示功能\n      this.hintsUsed++;\n    }\n  }\n};","map":{"version":3,"names":["sudoku","data","cells","Array","from","length","value","fixed","difficulty","timer","elapsedTime","hintsUsed","historyRecords","created","generateSudoku","startTimer","methods","puzzle","solution","makepuzzle","solvepuzzle","map","index","resetTimer","resetGame","forEach","cell","checkSolution","validGroup","group","seen","Set","i","num","has","add","row","slice","col","filter","_","box","Math","floor","$message","error","clearInterval","date","Date","toLocaleDateString","baseScore","timePenalty","hintPenalty","score","max","push","time","hints","result","success","setInterval","provideHint"],"sources":["src/views/Game/Sudoku.vue"],"sourcesContent":["<template>\n  <div class=\"sudoku-container\">\n    <div class=\"header\">\n      欢迎来到数独游戏训练\n    </div>\n    <div class=\"main-content\">\n      <div class=\"left-panel\">\n        <el-card class=\"sudoku-card\">\n          <div class=\"profile-section\">\n            <!-- 添加难度选择下拉菜单 -->\n            <el-select v-model=\"difficulty\" placeholder=\"选择难度\">\n              <el-option label=\"简单\" value=\"easy\"></el-option>\n              <el-option label=\"中等\" value=\"medium\"></el-option>\n              <el-option label=\"困难\" value=\"hard\"></el-option>\n            </el-select>\n            <!-- 显示计时器 -->\n            <div class=\"timer\">时间: {{ elapsedTime }} 秒</div>\n          </div>\n          <div class=\"game-and-buttons\">\n            <div class=\"game-area\">\n              <div class=\"sudoku-grid\">\n                <div\n                    v-for=\"(cell, index) in cells\"\n                    :key=\"index\"\n                    class=\"sudoku-cell\"\n                    :class=\"{ fixed: cell.fixed }\"\n                >\n                  <input\n                      ref=\"input-{{ index }}\"\n                      type=\"number\"\n                      min=\"1\"\n                      max=\"9\"\n                      v-model.number=\"cell.value\"\n                      :disabled=\"cell.fixed\"\n                      @keypress=\"handleKeyPress($event, index)\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div class=\"button-section\">\n              <div class=\"button-group\">\n                <el-button class=\"button\" type=\"primary\" @click=\"generateSudoku\">生成</el-button>\n                <el-button class=\"button\" type=\"warning\" @click=\"resetGame\">重置</el-button>\n                <el-button class=\"button\" type=\"info\">填充</el-button>\n                <el-button class=\"button\" type=\"default\" @click=\"provideHint\">提示</el-button>\n                <el-button class=\"button\" type=\"primary\">检查</el-button>\n                <el-button class=\"button\" type=\"primary\" @click=\"checkSolution\">验证</el-button>\n              </div>\n            </div>\n          </div>\n        </el-card>\n      </div>\n      <div class=\"right-panel\">\n        <div class=\"history\">\n          历史训练记录\n          <ul>\n            <li v-for=\"(record, index) in historyRecords\" :key=\"index\">\n              {{ record.date }} - 难度: {{ record.difficulty }} - 用时: {{ record.time }}秒 - 提示: {{ record.hints }}次 - 分数: {{ record.score }} - 结果: {{ record.result }}\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport sudoku from 'sudoku';\nexport default {\n  data() {\n    return {\n      cells: Array.from({ length: 81 }, () => ({ value: 0, fixed: false })),\n      difficulty: 'easy', // 默认难度\n      timer: null,\n      elapsedTime: 0,\n      hintsUsed: 0, // 添加用于跟踪提示次数的变量\n      historyRecords: [], // 历史记录数组\n    };\n  },\n  created() {\n    this.generateSudoku();\n    this.startTimer();\n  },\n  methods: {\n    generateSudoku() {\n      let puzzle, solution;\n      do {\n        puzzle = sudoku.makepuzzle();\n        solution = sudoku.solvepuzzle(puzzle);\n      } while (!solution);\n\n      this.cells = puzzle.map((value, index) => ({\n        value: value === null ? 0 : value + 1,\n        fixed: value !== null,\n      }));\n      this.solution = solution.map(value => value + 1);\n      this.resetTimer();\n      this.startTimer();\n    },\n    resetGame() {\n      this.cells.forEach((cell) => {\n        if (!cell.fixed) {\n          cell.value = 0;\n        }\n      });\n    },\n    checkSolution() {\n      const validGroup = (group) => {\n        const seen = new Set();\n        for (let i = 0; i < 9; i++) {\n          const num = group[i].value;\n          if (num < 1 || num > 9 || seen.has(num)) return false;\n          seen.add(num);\n        }\n        return true;\n      };\n\n      // 检查行、列和小方块\n      for (let i = 0; i < 9; i++) {\n        const row = this.cells.slice(i * 9, i * 9 + 9);\n        const col = this.cells.filter((_, index) => index % 9 === i);\n        const box = this.cells.filter(\n            (_, index) =>\n                Math.floor(index / 27) === Math.floor(i / 3) &&\n                Math.floor((index % 9) / 3) === i % 3\n        );\n        if (!validGroup(row) || !validGroup(col) || !validGroup(box)) {\n          this.$message.error(\"解答错误，请再试一次！\");\n          return;\n        }\n      }\n\n      // 如果解答正确，停止计时器并计算得分\n      clearInterval(this.timer);\n      const date = new Date().toLocaleDateString();\n      const baseScore = 1000;\n      const timePenalty = this.elapsedTime * 2; // 用时惩罚因子\n      const hintPenalty = this.hintsUsed * 50; // 提示次数惩罚因子\n      const score = Math.max(baseScore - timePenalty - hintPenalty, 0); // 确保分数不为负\n\n      // 更新历史记录\n      this.historyRecords.push({\n        date: date,\n        difficulty: this.difficulty === 'easy' ? '简单' : this.difficulty === 'medium' ? '中等' : '困难',\n        time: this.elapsedTime,\n        hints: this.hintsUsed,\n        score: score,\n        result: '成功',\n      });\n\n      this.$message.success(`恭喜你！解答正确！用时：${this.elapsedTime} 秒，得分：${score}`);\n    },\n    startTimer() {\n      this.timer = setInterval(() => {\n        this.elapsedTime++;\n      }, 1000);\n    },\n    resetTimer() {\n      clearInterval(this.timer);\n      this.elapsedTime = 0;\n    },\n    provideHint() {\n      // 示例提示功能\n      this.hintsUsed++;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.sudoku-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background-color: #fff6f3;\n}\n\n.header, .left-panel, .right-panel, .footer {\n  background-color: #fff;\n  border: 1px solid #dcdcdc;\n  padding: 20px;\n  margin: 10px;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.main-content {\n  display: flex;\n  width: 100%;\n  justify-content: space-around;\n}\n\n.left-panel, .right-panel {\n  flex: 1;\n  background-color: #f7ebe4\n}\n\n.right-panel{\n  background-color: #fbf5f2;\n}\n\n.sudoku-card {\n  width: 100%;\n}\n\n.profile-section {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.timer {\n  font-size: 1.2em;\n  font-weight: bold;\n}\n\n.game-area {\n  margin-top: 20px;\n}\n\n.sudoku-grid {\n  display: grid;\n  grid-template-columns: repeat(9, 1fr);\n  gap: 5px;\n}\n\n.sudoku-cell {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.sudoku-cell input {\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  font-size: 1.2em;\n}\n\n.sudoku-cell.fixed input {\n  background-color: #e0e0e0;\n}\n\n.button-section {\n  margin-top: 20px;\n}\n\n.button-group {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.history {\n  font-size: 1em;\n  font-weight: bold;\n  text-align: center;\n}\n\n.history-table th, .history-table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: center;\n}\n\n.history-table th {\n  background-color: #f2f2f2;\n}\n\n.history-table tr:nth-child(even) {\n  background-color: #f9f9f9;\n}\n\n.history-table tr:hover {\n  background-color: #ddd;\n}\n\n</style>"],"mappings":";;;;;;;;AAmEA,OAAAA,MAAA;AACA;EACAC,KAAA;IACA;MACAC,KAAA,EAAAC,KAAA,CAAAC,IAAA;QAAAC,MAAA;MAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA;MACAC,UAAA;MAAA;MACAC,KAAA;MACAC,WAAA;MACAC,SAAA;MAAA;MACAC,cAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,cAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACAF,eAAA;MACA,IAAAG,MAAA,EAAAC,QAAA;MACA;QACAD,MAAA,GAAAjB,MAAA,CAAAmB,UAAA;QACAD,QAAA,GAAAlB,MAAA,CAAAoB,WAAA,CAAAH,MAAA;MACA,UAAAC,QAAA;MAEA,KAAAhB,KAAA,GAAAe,MAAA,CAAAI,GAAA,EAAAf,KAAA,EAAAgB,KAAA;QACAhB,KAAA,EAAAA,KAAA,gBAAAA,KAAA;QACAC,KAAA,EAAAD,KAAA;MACA;MACA,KAAAY,QAAA,GAAAA,QAAA,CAAAG,GAAA,CAAAf,KAAA,IAAAA,KAAA;MACA,KAAAiB,UAAA;MACA,KAAAR,UAAA;IACA;IACAS,UAAA;MACA,KAAAtB,KAAA,CAAAuB,OAAA,CAAAC,IAAA;QACA,KAAAA,IAAA,CAAAnB,KAAA;UACAmB,IAAA,CAAApB,KAAA;QACA;MACA;IACA;IACAqB,cAAA;MACA,MAAAC,UAAA,GAAAC,KAAA;QACA,MAAAC,IAAA,OAAAC,GAAA;QACA,SAAAC,CAAA,MAAAA,CAAA,MAAAA,CAAA;UACA,MAAAC,GAAA,GAAAJ,KAAA,CAAAG,CAAA,EAAA1B,KAAA;UACA,IAAA2B,GAAA,QAAAA,GAAA,QAAAH,IAAA,CAAAI,GAAA,CAAAD,GAAA;UACAH,IAAA,CAAAK,GAAA,CAAAF,GAAA;QACA;QACA;MACA;;MAEA;MACA,SAAAD,CAAA,MAAAA,CAAA,MAAAA,CAAA;QACA,MAAAI,GAAA,QAAAlC,KAAA,CAAAmC,KAAA,CAAAL,CAAA,MAAAA,CAAA;QACA,MAAAM,GAAA,QAAApC,KAAA,CAAAqC,MAAA,EAAAC,CAAA,EAAAlB,KAAA,KAAAA,KAAA,SAAAU,CAAA;QACA,MAAAS,GAAA,QAAAvC,KAAA,CAAAqC,MAAA,CACA,CAAAC,CAAA,EAAAlB,KAAA,KACAoB,IAAA,CAAAC,KAAA,CAAArB,KAAA,WAAAoB,IAAA,CAAAC,KAAA,CAAAX,CAAA,SACAU,IAAA,CAAAC,KAAA,CAAArB,KAAA,cAAAU,CAAA,IACA;QACA,KAAAJ,UAAA,CAAAQ,GAAA,MAAAR,UAAA,CAAAU,GAAA,MAAAV,UAAA,CAAAa,GAAA;UACA,KAAAG,QAAA,CAAAC,KAAA;UACA;QACA;MACA;;MAEA;MACAC,aAAA,MAAArC,KAAA;MACA,MAAAsC,IAAA,OAAAC,IAAA,GAAAC,kBAAA;MACA,MAAAC,SAAA;MACA,MAAAC,WAAA,QAAAzC,WAAA;MACA,MAAA0C,WAAA,QAAAzC,SAAA;MACA,MAAA0C,KAAA,GAAAX,IAAA,CAAAY,GAAA,CAAAJ,SAAA,GAAAC,WAAA,GAAAC,WAAA;;MAEA;MACA,KAAAxC,cAAA,CAAA2C,IAAA;QACAR,IAAA,EAAAA,IAAA;QACAvC,UAAA,OAAAA,UAAA,0BAAAA,UAAA;QACAgD,IAAA,OAAA9C,WAAA;QACA+C,KAAA,OAAA9C,SAAA;QACA0C,KAAA,EAAAA,KAAA;QACAK,MAAA;MACA;MAEA,KAAAd,QAAA,CAAAe,OAAA,qBAAAjD,WAAA,SAAA2C,KAAA;IACA;IACAtC,WAAA;MACA,KAAAN,KAAA,GAAAmD,WAAA;QACA,KAAAlD,WAAA;MACA;IACA;IACAa,WAAA;MACAuB,aAAA,MAAArC,KAAA;MACA,KAAAC,WAAA;IACA;IACAmD,YAAA;MACA;MACA,KAAAlD,SAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}