{"ast":null,"code":"import router from './router';\nimport { getAccessToken } from '@/utils/auth';\nrouter.beforeEach((to, from, next) => {\n  if (getAccessToken()) {\n    // 如果有token\n    if (to.path === '/login' || to.path === '/register') {\n      next({\n        path: '/Afterlogin'\n      }); // 重定向到 AfterLogin.vue\n    } else {\n      next(); // 正常跳转\n    }\n  } else {\n    // 没有token\n    if (to.path === '/login' || to.path === '/register') {\n      next(); // 如果是去登录页或注册页，正常跳转\n    } else if (to.path === '/' || to.path === '/Reference') {\n      next(); // 允许访问首页和科学验证页面\n    } else {\n      next('/login'); // 其他页面请求重定向到登录页\n    }\n  }\n});\nrouter.afterEach(() => {\n  // 这里可以添加一些在路由跳转后需要执行的代码\n});","map":{"version":3,"names":["router","getAccessToken","beforeEach","to","from","next","path","afterEach"],"sources":["/Users/robin/Personal/AIGC/参赛作品/决赛作品/源代码/vue-web/src/permission.js"],"sourcesContent":["import router from './router'\nimport { getAccessToken } from '@/utils/auth'\n\nrouter.beforeEach((to, from, next) => {\n  if (getAccessToken()) { // 如果有token\n    if (to.path === '/login' || to.path === '/register') {\n      next({ path: '/Afterlogin' }) // 重定向到 AfterLogin.vue\n    } else {\n      next() // 正常跳转\n    }\n  } else { // 没有token\n    if (to.path === '/login' || to.path === '/register') {\n      next() // 如果是去登录页或注册页，正常跳转\n    } else if (to.path === '/' || to.path === '/Reference') {\n      next() // 允许访问首页和科学验证页面\n    } else {\n      next('/login') // 其他页面请求重定向到登录页\n    }\n  }\n})\n\nrouter.afterEach(() => {\n  // 这里可以添加一些在路由跳转后需要执行的代码\n})"],"mappings":"AAAA,OAAOA,MAAM,MAAM,UAAU;AAC7B,SAASC,cAAc,QAAQ,cAAc;AAE7CD,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,IAAIJ,cAAc,CAAC,CAAC,EAAE;IAAE;IACtB,IAAIE,EAAE,CAACG,IAAI,KAAK,QAAQ,IAAIH,EAAE,CAACG,IAAI,KAAK,WAAW,EAAE;MACnDD,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAc,CAAC,CAAC,EAAC;IAChC,CAAC,MAAM;MACLD,IAAI,CAAC,CAAC,EAAC;IACT;EACF,CAAC,MAAM;IAAE;IACP,IAAIF,EAAE,CAACG,IAAI,KAAK,QAAQ,IAAIH,EAAE,CAACG,IAAI,KAAK,WAAW,EAAE;MACnDD,IAAI,CAAC,CAAC,EAAC;IACT,CAAC,MAAM,IAAIF,EAAE,CAACG,IAAI,KAAK,GAAG,IAAIH,EAAE,CAACG,IAAI,KAAK,YAAY,EAAE;MACtDD,IAAI,CAAC,CAAC,EAAC;IACT,CAAC,MAAM;MACLA,IAAI,CAAC,QAAQ,CAAC,EAAC;IACjB;EACF;AACF,CAAC,CAAC;AAEFL,MAAM,CAACO,SAAS,CAAC,MAAM;EACrB;AAAA,CACD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}